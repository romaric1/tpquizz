<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Infos travaux</title>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" type="text/css" href="css/buttons.css"/>
    <script type="text/javascript" src="cordova.js"></script>
</head>
<body>


<script>
    scan();

    function scan() {
        console.log("clicked");
        cordova.plugins.barcodeScanner.scan(function (result) {
                var url = "questions/reponse.txt";
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState == 4 || xmlhttp.readyState == "complete") {

                        if (xmlhttp.responseText == result.text) {
                            reponse.appendChild(document.createTextNode(result.text));
                            alert("Bonne reponse");
                        } else
                            alert("Mauvaise reponse");
                    }
                }
                xmlhttp.open("GET", url, true);
                xmlhttp.send(null);

            }, function (error) {
                //error callback
                alert(JSON.stringify(error));
            }
        );
    }

    var scanner = document.createElement("button");   // Create a <button> element
    scanner.innerHTML = "scanner r√©ponse";                   // Insert text
    document.body.appendChild(scanner);
    scanner.setAttribute("id", "button1");
    document.getElementById("button1").onclick = function () {
        location.href = "scannerreponse.html";
    };


</script>
</body>
</html>